<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Smart Farm Dashboard</title>
    <!-- Tailwind CSS CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Google Fonts: Inter -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        /* Custom styles for the dashboard */
        body {
            font-family: 'Inter', sans-serif;
            background-color: #111827; /* Dark background */
        }
        .gauge-circle-bg {
            fill: none;
            stroke: #374151; /* Gray-700 */
            stroke-width: 10;
        }
        .gauge-circle-progress {
            fill: none;
            stroke-width: 10;
            stroke-linecap: round;
            transform: rotate(-90deg);
            transform-origin: 50% 50%;
            transition: stroke-dashoffset 0.5s ease-in-out;
        }
    </style>
</head>
<body class="text-white p-4 sm:p-6 lg:p-8">

    <div class="max-w-7xl mx-auto">
        <!-- Header -->
        <header class="mb-8">
            <h1 class="text-3xl sm:text-4xl font-bold text-center text-gray-100">ğŸŒ¿ Smart Farm Dashboard</h1>
            <p class="text-center text-gray-400 mt-2">ì‹¤ì‹œê°„ ì„¼ì„œ ëª¨ë‹ˆí„°ë§ ë° ì œì–´ ì‹œìŠ¤í…œ</p>
        </header>

        <!-- Sensor Grid -->
        <main class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6">
            
            <!-- Temperature Card -->
            <div class="bg-gray-800 p-6 rounded-2xl shadow-lg flex flex-col items-center justify-between">
                <div class="w-full flex items-center justify-between mb-4">
                    <h2 class="text-xl font-semibold text-gray-200">ì˜¨ë„</h2>
                    <!-- Temperature Icon -->
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="text-red-400"><path d="M14 4v10.54a4 4 0 1 1-4 0V4a2 2 0 0 1 4 0Z"/></svg>
                </div>
                <div class="relative w-40 h-40">
                    <svg class="w-full h-full" viewBox="0 0 100 100">
                        <circle class="gauge-circle-bg" cx="50" cy="50" r="45"></circle>
                        <circle id="temp-progress" class="gauge-circle-progress stroke-red-400" cx="50" cy="50" r="45"></circle>
                    </svg>
                    <div id="temp-value" class="absolute inset-0 flex items-center justify-center text-3xl font-bold">25â„ƒ</div>
                </div>
                <p class="mt-4 text-gray-400 text-sm">í˜„ì¬ ì‹¤ë‚´ ì˜¨ë„</p>
            </div>

            <!-- Humidity Card (with Controls) -->
            <div class="bg-gray-800 p-6 rounded-2xl shadow-lg flex flex-col items-center justify-between">
                <div class="w-full flex items-center justify-between mb-4">
                    <h2 class="text-xl font-semibold text-gray-200">ìŠµë„</h2>
                    <!-- Humidity Icon -->
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="text-blue-400"><path d="M12 22a7 7 0 0 0 7-7c0-2-1-3.9-3-5.5s-3.5-4-4-6.5c-.5 2.5-2 4.9-4 6.5C6 11.1 5 13 5 15a7 7 0 0 0 7 7z"/></svg>
                </div>
                <div class="relative w-40 h-40">
                    <svg class="w-full h-full" viewBox="0 0 100 100">
                        <circle class="gauge-circle-bg" cx="50" cy="50" r="45"></circle>
                        <circle id="humidity-progress" class="gauge-circle-progress stroke-blue-400" cx="50" cy="50" r="45"></circle>
                    </svg>
                    <div id="humidity-value" class="absolute inset-0 flex items-center justify-center text-3xl font-bold">60%</div>
                </div>
                 <div class="w-full mt-4 text-center">
                    <label for="humidity-slider" class="text-sm text-gray-400">ëª©í‘œ ìŠµë„ ì„¤ì •: <span id="humidity-setpoint-label" class="font-bold text-blue-300">65%</span></label>
                    <input id="humidity-slider" type="range" min="0" max="100" value="65" class="w-full h-2 bg-gray-600 rounded-lg appearance-none cursor-pointer mt-2">
                    <p id="system-status" class="mt-3 text-sm h-5">ì‹œìŠ¤í…œ ìƒíƒœ: ì •ìƒ</p>
                </div>
            </div>

            <!-- Soil Moisture Card -->
            <div class="bg-gray-800 p-6 rounded-2xl shadow-lg flex flex-col items-center justify-between">
                <div class="w-full flex items-center justify-between mb-4">
                    <h2 class="text-xl font-semibold text-gray-200">í† ì–‘ ìˆ˜ë¶„</h2>
                    <!-- Soil Moisture Icon -->
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="text-green-400"><path d="M21.2,12.2C21.2,12.2,21.2,12.2,21.2,12.2C19.3,16,16,18.8,12,18.8S4.7,16,2.8,12.2c0,0,0,0,0,0c-1.8-3.9,0.3-7.5,1-8.6 C4.2,2.8,4.9,2.2,5.6,2.1c0,0,0,0,0.1,0C7.2,1.8,9.6,3.3,12,5.7c2.4-2.4,4.8-3.9,6.3-4.1c0,0,0.1,0,0.1,0c0.7,0.1,1.4,0.7,1.8,1.5 C20.9,4.7,23,8.3,21.2,12.2z"/><path d="M12,18.8v3.3"/></svg>
                </div>
                <div class="relative w-40 h-40">
                    <svg class="w-full h-full" viewBox="0 0 100 100">
                        <circle class="gauge-circle-bg" cx="50" cy="50" r="45"></circle>
                        <circle id="soil-progress" class="gauge-circle-progress stroke-green-400" cx="50" cy="50" r="45"></circle>
                    </svg>
                    <div id="soil-value" class="absolute inset-0 flex items-center justify-center text-3xl font-bold">45%</div>
                </div>
                 <p class="mt-4 text-gray-400 text-sm">í† ì–‘ì˜ ìˆ˜ë¶„ í•¨ëŸ‰</p>
            </div>

            <!-- Light Intensity Card -->
            <div class="bg-gray-800 p-6 rounded-2xl shadow-lg flex flex-col items-center justify-between">
                <div class="w-full flex items-center justify-between mb-4">
                    <h2 class="text-xl font-semibold text-gray-200">ì¡°ë„</h2>
                    <!-- Light Icon -->
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="text-yellow-400"><circle cx="12" cy="12" r="4"/><path d="M12 2v2"/><path d="M12 20v2"/><path d="m4.93 4.93 1.41 1.41"/><path d="m17.66 17.66 1.41 1.41"/><path d="M2 12h2"/><path d="M20 12h2"/><path d="m4.93 19.07 1.41-1.41"/><path d="m17.66 6.34 1.41-1.41"/></svg>
                </div>
                <div class="relative w-40 h-40">
                    <svg class="w-full h-full" viewBox="0 0 100 100">
                        <circle class="gauge-circle-bg" cx="50" cy="50" r="45"></circle>
                        <circle id="light-progress" class="gauge-circle-progress stroke-yellow-400" cx="50" cy="50" r="45"></circle>
                    </svg>
                    <div id="light-value" class="absolute inset-0 flex items-center justify-center text-3xl font-bold">800lx</div>
                </div>
                <p class="mt-4 text-gray-400 text-sm">í˜„ì¬ ì¡°ë„ëŸ‰</p>
            </div>
        </main>
    </div>

    <script>
        // DOM Elements
        const tempValueEl = document.getElementById('temp-value');
        const tempProgressEl = document.getElementById('temp-progress');
        const humidityValueEl = document.getElementById('humidity-value');
        const humidityProgressEl = document.getElementById('humidity-progress');
        const soilValueEl = document.getElementById('soil-value');
        const soilProgressEl = document.getElementById('soil-progress');
        const lightValueEl = document.getElementById('light-value');
        const lightProgressEl = document.getElementById('light-progress');
        
        const humiditySlider = document.getElementById('humidity-slider');
        const humiditySetpointLabel = document.getElementById('humidity-setpoint-label');
        const systemStatusEl = document.getElementById('system-status');

        // Gauge circle circumference
        const circumference = 2 * Math.PI * 45; // 2 * PI * radius

        // Set initial stroke-dasharray
        [tempProgressEl, humidityProgressEl, soilProgressEl, lightProgressEl].forEach(el => {
            el.style.strokeDasharray = circumference;
        });

        // Function to update a gauge
        function updateGauge(element, value, max) {
            const offset = circumference - (value / max) * circumference;
            element.style.strokeDashoffset = offset;
        }
        
        // Function to simulate random data fluctuation
        function fluctuate(value, min, max, amount) {
            let change = (Math.random() - 0.5) * amount;
            let newValue = value + change;
            return Math.max(min, Math.min(max, newValue));
        }

        // State for sensor values
        let currentTemp = 25.0;
        let currentHumidity = 60.0;
        let currentSoil = 45.0;
        let currentLight = 800;
        
        let targetHumidity = 65;

        // Update humidity setpoint from slider
        humiditySlider.addEventListener('input', (e) => {
            targetHumidity = parseInt(e.target.value);
            humiditySetpointLabel.textContent = `${targetHumidity}%`;
        });

        // Main update loop to simulate real-time data
        setInterval(() => {
            // 1. Simulate new sensor data
            currentTemp = fluctuate(currentTemp, 10, 40, 0.5);
            currentHumidity = fluctuate(currentHumidity, 20, 90, 1);
            currentSoil = fluctuate(currentSoil, 10, 80, 0.8);
            currentLight = fluctuate(currentLight, 100, 1500, 50);

            // 2. Update UI text
            tempValueEl.textContent = `${currentTemp.toFixed(1)}â„ƒ`;
            humidityValueEl.textContent = `${currentHumidity.toFixed(0)}%`;
            soilValueEl.textContent = `${currentSoil.toFixed(0)}%`;
            lightValueEl.textContent = `${currentLight.toFixed(0)}lx`;

            // 3. Update gauges
            updateGauge(tempProgressEl, currentTemp, 50); // Max temp 50
            updateGauge(humidityProgressEl, currentHumidity, 100); // Max humidity 100
            updateGauge(soilProgressEl, currentSoil, 100); // Max soil moisture 100
            updateGauge(lightProgressEl, currentLight, 2000); // Max light 2000 lx

            // 4. Update system status based on humidity
            if (currentHumidity < targetHumidity - 2) { // Add a small buffer
                systemStatusEl.textContent = 'ìƒíƒœ: ê°€ìŠµê¸° ì‘ë™ ì¤‘...';
                systemStatusEl.classList.remove('text-green-400');
                systemStatusEl.classList.add('text-yellow-400');
            } else if (currentHumidity > targetHumidity + 2) {
                systemStatusEl.textContent = 'ìƒíƒœ: í™˜í’ê¸° ì‘ë™ ì¤‘...';
                 systemStatusEl.classList.remove('text-green-400');
                systemStatusEl.classList.add('text-orange-400');
            } else {
                systemStatusEl.textContent = 'ìƒíƒœ: ìµœì  ìŠµë„ ìœ ì§€ ì¤‘';
                systemStatusEl.classList.remove('text-yellow-400', 'text-orange-400');
                systemStatusEl.classList.add('text-green-400');
            }

        }, 2000); // Update every 2 seconds
    </script>
</body>
</html>
